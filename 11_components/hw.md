## Компоненты Kubernetes
### Задание. Необходимо определить требуемые ресурсы

Для текущих сервисов нам необходимо ресурсов (минимум) - для отказоустойчивости 3 ноды (минимум):

- 3 Ноды, в каждой из них будет содержаться:
  - 1: БД (4RAM+1CPU), Кеш (4RAM+1CPU), Фронт 2 пода (0,1RAM+0,4CPU), Бэк 4 пода(2,4RAM+4CPU) = 10,5RAM+6,4CPU
  - 2: БД (4RAM+1CPU), Кеш (4RAM+1CPU), Фронт 2 пода (0,1RAM+0,4CPU), Бэк 3 пода(1,8RAM+3CPU) = 9,9RAM+5,4CPU
  - 3: БД (4RAM+1CPU), Кеш (4RAM+1CPU), Фронт 2 пода (0,1RAM+0,4CPU), Бэк 3 пода(1,8RAM+3CPU) = 9,85RAM+5,2CPU

-----------------------------------------------------------------

Также согласно требованиям для OS и Kubelet необходимо:
- 6% от первого ядра.
- 1% следующего ядра (до 2 ядер).
- 0,5% следующих двух ядер (до 4).
- 0,25% любых ядер свыше четырех ядер.

- 255 МБ памяти для машин с объемом памяти менее 1 ГБ.
- 25% от первых 4Гб памяти.
- 20% от следующих 4 ГБ памяти (до 8 ГБ).
- 10% от следующих 8 ГБ памяти (до 16 ГБ).
- 6% от следующих 112Гб памяти (до 128Гб).
- 2% любой памяти выше 128 ГБ.
-----------------------------------------------------------------

- 1 нода:
  60+13,5=73.5mCPU ~= 0,1CPU

  1000+800+250 = 2,05 RAM
- 2 нода:
  60+11=71mCPU ~= 0,1CPU

  1000+800+190 = 1,99 RAM
- 3 нода:
  60+10,5=70.5mCPU ~= 0,1CPU

  1000+800+185 = 1,985 RAM
-----------------------------------------------------------------
*для каждой ноды должен быть запас Eviction threshold = 0,1 RAM (100MB)*

В итоге для нод нужно минимум:
- 1 нода: 10,5RAM + 6,4CPU + 2,05 RAM + 0,1CPU + 0,1RAM = 12,65 RAM + 6,5 CPU
- 2 нода: 9,9RAM + 5,4CPU + 1,99 RAM + 0,1CPU + 0,1RAM = 11,99 RAM + 5,5 CPU
- 3 нода: 9,85RAM + 5,2CPU + 1,985 RAM + 0,1CPU + 0,1RAM = 11,94 RAM + 5,3 CPU

В сумме = 36,58 RAM + 17,3 CPU
-----------------------------------------------------------------

Если падает одна из нод, то необходимо сделать запас ресурсов в размере самой бОльшей из текущих (12,65 RAM + 6,5 CPU) и распределить половину из них на все ~= 6,5 RAM + 3,5 CPU

В сумме = 
- 1 нода: 19,15 RAM + 10 CPU
- 2 нода: 18,5 RAM + 9 CPU
- 3 нода: 18,44 RAM + 8,8 CPU

В сумме = 56,1 RAM и 27,8 CPU

Можно сделать еще небольшой запас:
- 1 нода: 21 RAM + 11 CPU
- 2 нода: 20 RAM + 10 CPU
- 3 нода: 20 RAM + 9,5 CPU

***В сумме = 61 RAM и 30,5 CPU***
-----------------------------------------------------------------
*RAM (в ГБ)
*CPU (в количестве ядер)